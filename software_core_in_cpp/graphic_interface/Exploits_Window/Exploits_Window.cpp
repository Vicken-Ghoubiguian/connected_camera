#include "Exploits_Window.hpp"

Exploits_Window::Exploits_Window()
{
	set_title ("Connected camera");
	set_border_width (10);

	webcam_frame.set_label ("Camera displaying area");
	webcam_frame.set_label_align (Gtk::ALIGN_CENTER, Gtk::ALIGN_CENTER);
	webcam_frame.set_shadow_type (Gtk::SHADOW_OUT);
	webcam_frame.set_size_request(640, 457);

	webcam_area.set_tooltip_text("Camera");
    	webcam_frame.add(webcam_area);

	widgets_grid.attach(webcam_frame, 0, 0, 1, 1);

	description_label.set_text(print_howto_in_window());

	widgets_grid.attach(description_label, 0, 1, 1, 1);

	add(widgets_grid);

	add_events(Gdk::KEY_PRESS_MASK);

	show_all();
}

bool Exploits_Window::on_key_press_event(GdkEventKey* key_event)
{
	if(key_event->keyval == GDK_KEY_Escape)
	{
		hide();

		return true;
	}
	else if(key_event->keyval == GDK_KEY_a)
	{
		webcam_area.setCurrent_mode(CC_BLACK_AND_WHITE_WITH_RGB_MODE);

		return true;
	}
	else if(key_event->keyval == GDK_KEY_y)
	{
		webcam_area.setCurrent_mode(CC_EDGE_DETECTION_MODE);

		return true;
	}
	else if(key_event->keyval == GDK_KEY_o)
	{
		webcam_area.setCurrent_mode(CC_ORDINARY_MODE);

		return true;
	}

	return Gtk::Window::on_key_press_event(key_event);
}

Exploits_Window::~Exploits_Window()
{

}
